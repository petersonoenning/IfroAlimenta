@page "/sugestao"
@using IfroAlimenta.Models
@using IfroAlimenta.Controllers
@inject SugestaoController sugestaoController
@inject NavigationManager navigationManager

<h3>Cadastro de Sugestão</h3>

<form method="post" @onsubmit="SalvarSugestao">
    <div class="form-group">
        <label for="descricao">Descrição:</label>
        <input type="text" id="descricao" class="form-control" @bind="sugestao.Descricao" />
    </div>

    <div class="form-group">
        <label for="data">Data:</label>
        <input type="date" id="data" class="form-control" @bind="sugestao.Data" />
    </div>

    <button type="submit" class="btn btn-primary">Salvar</button>
</form>

@code {
    private Sugestao sugestao = new Sugestao();

    private async Task SalvarSugestao()
    {
        try
        {
            // Salva a sugestão usando o controlador
            await sugestaoController.Add(sugestao);
            // Redireciona para a mesma página ou outra, conforme necessário
            navigationManager.NavigateTo("/sugestao");
        }
        catch (Exception ex)
        {
            // Tratamento de erro (opcional)
        }
    }
}
